<html>
<head>
  <title>迭代</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1798"/>
<h1>迭代</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/9/3 2:55</i></td></tr>
</table>
</div>
<br/>

<div><span>
  <div style="--en-clipped-content:article">
<div><br/></div><div style="font-size: 16px; display:block; min-width: 100%; position: relative;"> <div style="font:14px/20px &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;text-size-adjust:100%;background:rgb(255, 255, 255);color:rgb(68, 68, 68);"><div style="font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:14px;line-height:20px;color:rgb(102, 102, 102);background-color:rgb(255, 255, 255);"><div><div style="box-sizing:border-box;"><div style="list-style:none;"><div style="box-sizing:border-box;"><div><div><div><div><p style="margin:0px 0px 15px;">如果给定一个list或tuple，我们可以通过<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环来遍历这个list或tuple，这种遍历我们称为迭代（Iteration）。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">在Python中，迭代是通过<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for ... in</code>来完成的，而很多语言比如C语言，迭代list是通过下标完成的，比如Java代码：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;">for (i=0; i<span style="color:rgb(0, 0, 128);font-weight:normal;">&lt;<span style="color:rgb(0, 0, 128);font-weight:normal;">list.length;</span> <span style="color:rgb(0, 128, 128);">i</span>++) {
    <span style="color:rgb(0, 128, 128);">n</span> = <span style="color:rgb(0, 128, 128);">list</span>[<span style="color:rgb(0, 128, 128);">i</span>];
}
</span></code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">可以看出，Python的<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环抽象程度要高于C的<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环，因为Python的<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环不仅可以用在list或tuple上，还可以作用在其他可迭代对象上。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">list这种数据类型虽然有下标，但很多其他数据类型是没有下标的，但是，只要是可迭代对象，无论有无下标，都可以迭代，比如dict就可以迭代：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span>d = {<span style="color:rgb(221, 17, 68);">'a'</span>: <span style="color:rgb(0, 153, 153);">1</span>, <span style="color:rgb(221, 17, 68);">'b'</span>: <span style="color:rgb(0, 153, 153);">2</span>, <span style="color:rgb(221, 17, 68);">'c'</span>: <span style="color:rgb(0, 153, 153);">3</span>}
<span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span><span style="color:rgb(51, 51, 51);font-weight:bold;">for</span> key <span style="color:rgb(51, 51, 51);font-weight:bold;">in</span> d:
<span style="color:rgb(153, 0, 115);">... </span>    print(key)
...
a
c
b
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">因为dict的存储不是按照list的方式顺序排列，所以，迭代出的结果顺序很可能不一样。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">默认情况下，dict迭代的是key。如果要迭代value，可以用<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for value in d.values()</code>，如果要同时迭代key和value，可以用<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for k, v in d.items()</code>。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">由于字符串也是可迭代对象，因此，也可以作用于<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span><span style="color:rgb(51, 51, 51);font-weight:bold;">for</span> ch <span style="color:rgb(51, 51, 51);font-weight:bold;">in</span> <span style="color:rgb(221, 17, 68);">'ABC'</span>:
<span style="color:rgb(153, 0, 115);">... </span>    print(ch)
...
A
B
C
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">所以，当我们使用<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环时，只要作用于一个可迭代对象，<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环就可以正常运行，而我们不太关心该对象究竟是list还是其他数据类型。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">那么，如何判断一个对象是可迭代对象呢？方法是通过collections模块的Iterable类型判断：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span><span style="color:rgb(51, 51, 51);font-weight:bold;">from</span> collections <span style="color:rgb(51, 51, 51);font-weight:bold;">import</span> Iterable
<span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(<span style="color:rgb(221, 17, 68);">'abc'</span>, Iterable) <span style="color:rgb(153, 153, 136);font-style:italic;"># str是否可迭代</span>
<span style="color:rgb(0, 134, 179);">True</span>
<span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance([<span style="color:rgb(0, 153, 153);">1</span>,<span style="color:rgb(0, 153, 153);">2</span>,<span style="color:rgb(0, 153, 153);">3</span>], Iterable) <span style="color:rgb(153, 153, 136);font-style:italic;"># list是否可迭代</span>
<span style="color:rgb(0, 134, 179);">True</span>
<span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(<span style="color:rgb(0, 153, 153);">123</span>, Iterable) <span style="color:rgb(153, 153, 136);font-style:italic;"># 整数是否可迭代</span>
<span style="color:rgb(0, 134, 179);">False</span>
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">最后一个小问题，如果要对list实现类似Java那样的下标循环怎么办？Python内置的<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">enumerate</code>函数可以把一个list变成索引-元素对，这样就可以在<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环中同时迭代索引和元素本身：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span><span style="color:rgb(51, 51, 51);font-weight:bold;">for</span> i, value <span style="color:rgb(51, 51, 51);font-weight:bold;">in</span> enumerate([<span style="color:rgb(221, 17, 68);">'A'</span>, <span style="color:rgb(221, 17, 68);">'B'</span>, <span style="color:rgb(221, 17, 68);">'C'</span>]):
<span style="color:rgb(153, 0, 115);">... </span>    print(i, value)
...
<span style="color:rgb(0, 153, 153);">0</span> A
<span style="color:rgb(0, 153, 153);">1</span> B
<span style="color:rgb(0, 153, 153);">2</span> C
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">上面的<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环里，同时引用了两个变量，在Python里是很常见的，比如下面的代码：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span style="color:rgb(153, 0, 115);">&gt;&gt;&gt; </span><span style="color:rgb(51, 51, 51);font-weight:bold;">for</span> x, y <span style="color:rgb(51, 51, 51);font-weight:bold;">in</span> [(<span style="color:rgb(0, 153, 153);">1</span>, <span style="color:rgb(0, 153, 153);">1</span>), (<span style="color:rgb(0, 153, 153);">2</span>, <span style="color:rgb(0, 153, 153);">4</span>), (<span style="color:rgb(0, 153, 153);">3</span>, <span style="color:rgb(0, 153, 153);">9</span>)]:
<span style="color:rgb(153, 0, 115);">... </span>    print(x, y)
...
<span style="color:rgb(0, 153, 153);">1</span> <span style="color:rgb(0, 153, 153);">1</span>
<span style="color:rgb(0, 153, 153);">2</span> <span style="color:rgb(0, 153, 153);">4</span>
<span style="color:rgb(0, 153, 153);">3</span> <span style="color:rgb(0, 153, 153);">9</span>
</code></pre>
<h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">练习</h3>
<p style="margin:0px 0px 15px;margin-top:15px;">请使用迭代查找一个list中最小和最大值，并返回一个tuple：</p>
<div style="margin-top:15px;margin-bottom:15px;"><pre style="margin:0px 0px 15px;padding:6px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;font-size:14px;margin-bottom:0px;border-bottom:none;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"># -*- coding: utf-8 -*-
def findMinAndMax(L):
</pre><pre style="margin:0px 0px 15px;margin-top:0;padding:6px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;font-size:14px;border-top:0;border-top-left-radius:0;border-top-right-radius:0;"># 测试
if findMinAndMax([]) != (None, None):
    print('测试失败!')
elif findMinAndMax([7]) != (7, 7):
    print('测试失败!')
elif findMinAndMax([7, 1]) != (1, 7):
    print('测试失败!')
elif findMinAndMax([7, 1, 3, 9, 5]) != (1, 9):
    print('测试失败!')
else:
    print('测试成功!')
</pre></div>
<h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">小结</h3>
<p style="margin:0px 0px 15px;margin-top:15px;">任何可迭代对象都可以作用于<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环，包括我们自定义的数据类型，只要符合迭代条件，就可以使用<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">for</code>循环。</p>
<h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">参考源码</h3>
<p style="margin:0px 0px 15px;margin-top:15px;"><a href="https://github.com/michaelliao/learn-python3/blob/master/samples/advance/do_iter.py" style="background:transparent;color:rgb(5, 147, 211);text-decoration:none;cursor:pointer;" target="_blank">do_iter.py</a></p>
</div></div></div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 