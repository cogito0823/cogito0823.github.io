<html>
<head>
  <title>访问数据库</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2127"/>
<h1>访问数据库</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/9/3 21:28</i></td></tr>
</table>
</div>
<br/>

<div><span>
  <div style="--en-clipped-content:article">
<div><br/></div><div style="font-size: 16px; display:block; min-width: 100%; position: relative;"> <div style="font:14px/20px &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;text-size-adjust:100%;background:rgb(255, 255, 255);color:rgb(68, 68, 68);"><div style="font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:14px;line-height:20px;color:rgb(102, 102, 102);background-color:rgb(255, 255, 255);"><div><div style="box-sizing:border-box;"><div style="list-style:none;"><div style="box-sizing:border-box;"><div><div><div>
								    <h4 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;font-size:16px;line-height:22px;">访问数据库</h4>
    <div>
    	<span>阅读: 1129068</span>
    	</div>

    <hr style="box-sizing:content-box;height:0px;margin:15px 0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);"/>

    <div><p style="margin:0px 0px 15px;">程序运行的时候，数据都是在内存中的。当程序终止的时候，通常都需要将数据保存到磁盘上，无论是保存到本地磁盘，还是通过网络保存到服务器上，最终都会将数据写入磁盘文件。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">而如何定义数据的存储格式就是一个大问题。如果我们自己来定义存储格式，比如保存一个班级所有学生的成绩单：</p>
<table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;width:100%;margin-bottom:15px;margin-top:15px;">
<tbody><tr><th style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);text-align:left;">名字</th><th style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);text-align:left;">成绩</th></tr>
<tr><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">Michael</td><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">99</td></tr>
<tr><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">Bob</td><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">85</td></tr>
<tr><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">Bart</td><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">59</td></tr>
<tr><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">Lisa</td><td style="padding:8px;border-bottom:1px solid rgb(221, 221, 221);vertical-align:top;">87</td></tr>
</tbody></table>
<p style="margin:0px 0px 15px;margin-top:15px;">你可以用一个文本文件保存，一行保存一个学生，用<code style="font-size:12px;font-family:Consolas, monospace, serif;color:rgb(221, 0, 85);padding:0px 4px;border:1px solid rgb(221, 221, 221);border-radius:3px;background:rgb(250, 250, 250);white-space:normal;">,</code>隔开：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;">Michael,99
Bob,85
Bart,59
Lisa,87
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">你还可以用JSON格式保存，也是文本文件：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;">[
    {&quot;<span style="color:rgb(0, 128, 128);">name</span>&quot;:<span><span style="color:rgb(221, 17, 68);">&quot;Michael&quot;</span></span>,&quot;<span style="color:rgb(0, 128, 128);">score</span>&quot;:<span><span style="color:rgb(0, 153, 153);">99</span>}</span>,
    {&quot;<span style="color:rgb(0, 128, 128);">name</span>&quot;:<span><span style="color:rgb(221, 17, 68);">&quot;Bob&quot;</span></span>,&quot;<span style="color:rgb(0, 128, 128);">score</span>&quot;:<span><span style="color:rgb(0, 153, 153);">85</span>}</span>,
    {&quot;<span style="color:rgb(0, 128, 128);">name</span>&quot;:<span><span style="color:rgb(221, 17, 68);">&quot;Bart&quot;</span></span>,&quot;<span style="color:rgb(0, 128, 128);">score</span>&quot;:<span><span style="color:rgb(0, 153, 153);">59</span>}</span>,
    {&quot;<span style="color:rgb(0, 128, 128);">name</span>&quot;:<span><span style="color:rgb(221, 17, 68);">&quot;Lisa&quot;</span></span>,&quot;<span style="color:rgb(0, 128, 128);">score</span>&quot;:<span><span style="color:rgb(0, 153, 153);">87</span>}</span>
]
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">你还可以定义各种保存格式，但是问题来了：</p>
<p style="margin:0px 0px 15px;margin-top:15px;">存储和读取需要自己实现，JSON还是标准，自己定义的格式就各式各样了；</p>
<p style="margin:0px 0px 15px;margin-top:15px;">不能做快速查询，只有把数据全部读到内存中才能自己遍历，但有时候数据的大小远远超过了内存（比如蓝光电影，40GB的数据），根本无法全部读入内存。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">为了便于程序保存和读取数据，而且，能直接通过条件快速查询到指定的数据，就出现了数据库（Database）这种专门用于集中存储和查询的软件。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">数据库软件诞生的历史非常久远，早在1950年数据库就诞生了。经历了网状数据库，层次数据库，我们现在广泛使用的关系数据库是20世纪70年代基于关系模型的基础上诞生的。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">关系模型有一套复杂的数学理论，但是从概念上是十分容易理解的。举个学校的例子：</p>
<p style="margin:0px 0px 15px;margin-top:15px;">假设某个XX省YY市ZZ县第一实验小学有3个年级，要表示出这3个年级，可以在Excel中用一个表格画出来：</p>
<p style="margin:0px 0px 15px;margin-top:15px;"><img src="访问数据库_files/0" type="image/png" data-filename="0" height="98" style="vertical-align:middle;max-width:100%;height:auto;box-sizing:border-box;border:0px;" width="106"/></p>
<p style="margin:0px 0px 15px;margin-top:15px;">每个年级又有若干个班级，要把所有班级表示出来，可以在Excel中再画一个表格：</p>
<p style="margin:0px 0px 15px;margin-top:15px;"><img src="访问数据库_files/0 [1]" type="image/png" data-filename="0" height="230" style="vertical-align:middle;max-width:100%;height:auto;box-sizing:border-box;border:0px;" width="190"/></p>
<p style="margin:0px 0px 15px;margin-top:15px;">这两个表格有个映射关系，就是根据Grade_ID可以在班级表中查找到对应的所有班级：</p>
<p style="margin:0px 0px 15px;margin-top:15px;"><img src="访问数据库_files/0 [2]" type="image/png" data-filename="0" height="230" style="vertical-align:middle;max-width:100%;height:auto;box-sizing:border-box;border:0px;" width="401"/></p>
<p style="margin:0px 0px 15px;margin-top:15px;">也就是Grade表的每一行对应Class表的多行，在关系数据库中，这种基于表（Table）的一对多的关系就是关系数据库的基础。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">根据某个年级的ID就可以查找所有班级的行，这种查询语句在关系数据库中称为SQL语句，可以写成：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span><span style="color:rgb(51, 51, 51);font-weight:bold;">SELECT</span> * <span style="color:rgb(51, 51, 51);font-weight:bold;">FROM</span> classes <span style="color:rgb(51, 51, 51);font-weight:bold;">WHERE</span> grade_id = <span style="color:rgb(221, 17, 68);">'1'</span>;</span>
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">结果也是一个表：</p>
<pre style="margin:0px 0px 15px;margin-top:15px;padding:10px;background:rgb(250, 250, 250);font:12px/18px Consolas, monospace, serif;color:rgb(68, 68, 68);tab-size:4;overflow:auto;border:1px solid rgb(221, 221, 221);border-radius:3px;"><code style="white-space:pre-wrap;"><span style="color:rgb(153, 153, 136);font-style:italic;">---------+----------+----------</span>
grade_id | class_id | name
<span style="color:rgb(153, 153, 136);font-style:italic;">---------+----------+----------</span>
1        | 11       | 一年级一班
<span style="color:rgb(153, 153, 136);font-style:italic;">---------+----------+----------</span>
1        | 12       | 一年级二班
<span style="color:rgb(153, 153, 136);font-style:italic;">---------+----------+----------</span>
1        | 13       | 一年级三班
<span style="color:rgb(153, 153, 136);font-style:italic;">---------+----------+----------</span>
</code></pre>
<p style="margin:0px 0px 15px;margin-top:15px;">类似的，Class表的一行记录又可以关联到Student表的多行记录：</p>
<p style="margin:0px 0px 15px;margin-top:15px;"><img src="访问数据库_files/0 [3]" type="image/png" data-filename="0" height="226" style="vertical-align:middle;max-width:100%;height:auto;box-sizing:border-box;border:0px;" width="490"/></p>
<p style="margin:0px 0px 15px;margin-top:15px;">由于本教程不涉及到关系数据库的详细内容，如果你想从零学习关系数据库和基本的SQL语句，如果你想从零学习关系数据库和基本的SQL语句，请自行搜索相关课程。</p>
<h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">NoSQL</h3>
<p style="margin:0px 0px 15px;margin-top:15px;">你也许还听说过NoSQL数据库，很多NoSQL宣传其速度和规模远远超过关系数据库，所以很多同学觉得有了NoSQL是否就不需要SQL了呢？千万不要被他们忽悠了，连SQL都不明白怎么可能搞明白NoSQL呢？</p>
<h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">数据库类别</h3>
<p style="margin:0px 0px 15px;margin-top:15px;">既然我们要使用关系数据库，就必须选择一个关系数据库。目前广泛使用的关系数据库也就这么几种：</p>
<p style="margin:0px 0px 15px;margin-top:15px;">付费的商用数据库：</p>
<ul style="margin:0px 0px 15px;margin-top:15px;padding-left:30px;">
<li>
<p style="margin:0px 0px 15px;">Oracle，典型的高富帅；</p>
</li>
<li>
<p style="margin:0px 0px 15px;">SQL Server，微软自家产品，Windows定制专款；</p>
</li>
<li>
<p style="margin:0px 0px 15px;">DB2，IBM的产品，听起来挺高端；</p>
</li>
<li>
<p style="margin:0px 0px 15px;">Sybase，曾经跟微软是好基友，后来关系破裂，现在家境惨淡。</p>
</li>
</ul>
<p style="margin:0px 0px 15px;margin-top:15px;">这些数据库都是不开源而且付费的，最大的好处是花了钱出了问题可以找厂家解决，不过在Web的世界里，常常需要部署成千上万的数据库服务器，当然不能把大把大把的银子扔给厂家，所以，无论是Google、Facebook，还是国内的BAT，无一例外都选择了免费的开源数据库：</p>
<ul style="margin:0px 0px 15px;margin-top:15px;padding-left:30px;">
<li>
<p style="margin:0px 0px 15px;">MySQL，大家都在用，一般错不了；</p>
</li>
<li>
<p style="margin:0px 0px 15px;">PostgreSQL，学术气息有点重，其实挺不错，但知名度没有MySQL高；</p>
</li>
<li>
<p style="margin:0px 0px 15px;">sqlite，嵌入式数据库，适合桌面和移动应用。</p>
</li>
</ul>
<p style="margin:0px 0px 15px;margin-top:15px;">作为Python开发工程师，选择哪个免费数据库呢？当然是MySQL。因为MySQL普及率最高，出了错，可以很容易找到解决方法。而且，围绕MySQL有一大堆监控和运维的工具，安装和使用很方便。</p>
<p style="margin:0px 0px 15px;margin-top:15px;">为了能继续后面的学习，你需要从MySQL官方网站下载并安装<a href="http://dev.mysql.com/downloads/mysql/" style="background:transparent;color:rgb(5, 147, 211);text-decoration:none;cursor:pointer;" target="_blank">MySQL Community Server 5.6</a>，这个版本是免费的，其他高级版本是要收钱的（请放心，收钱的功能我们用不上）。</p>
</div><h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">读后有收获可以支付宝请作者喝咖啡，读后有疑问请加微信群讨论：</h3><p style="margin:0px 0px 15px;margin-top:15px;"><img src="访问数据库_files/0 [4]" type="image/png" data-filename="0" height="220" style="vertical-align:middle;max-width:100%;height:auto;box-sizing:border-box;border:0px;" width="220"/> <img src="访问数据库_files/0 [5]" type="image/jpeg" data-filename="0" height="220" style="vertical-align:middle;max-width:100%;height:auto;box-sizing:border-box;border:0px;" width="220"/></p><h3 style="margin:0px 0px 15px;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:normal;color:rgb(68, 68, 68);text-transform:none;margin-top:25px;font-size:18px;line-height:24px;">还可以分享给朋友：</h3><p style="margin:0px 0px 15px;margin-top:15px;"><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017801397501728#0" style="-webkit-appearance:none;margin:0px;overflow:visible;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-family:inherit;text-transform:none;display:inline-block;box-sizing:border-box;padding:0px 12px;vertical-align:middle;line-height:28px;min-height:30px;font-size:14px;text-align:center;border:1px solid rgba(0, 0, 0, 0.06);border-radius:4px;background:rgb(245, 245, 245);text-decoration:none;background-color:rgb(218, 49, 75);color:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.05) 0px 0px 5px inset;text-shadow:rgba(0, 0, 0, 0.1) 0px -1px 0px;cursor:pointer;"><i style="font-family:FontAwesome;display:inline-block;font-weight:normal;font-style:normal;line-height:1;-webkit-font-smoothing:antialiased;text-decoration:none;"><span style="font-family:FontAwesome;font-weight:normal;font-style:normal;line-height:1;"></span></i> 分享到微博</a></p>

    <hr style="box-sizing:content-box;height:0px;margin:15px 0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);"/>

    <div style="padding-left:15px;padding-right:15px;"><span style="display:table-cell;"></span><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017800447489504" style="background:transparent;color:rgb(5, 147, 211);text-decoration:none;cursor:pointer;"><i style="font-family:FontAwesome;display:inline-block;font-weight:normal;font-style:normal;line-height:1;-webkit-font-smoothing:antialiased;text-decoration:none;"><span style="font-family:FontAwesome;font-weight:normal;font-style:normal;line-height:1;"></span></i> 上一页</a><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017801751919456" style="background:transparent;color:rgb(5, 147, 211);text-decoration:none;cursor:pointer;float:right;max-width:100%;">下一页 <i style="font-family:FontAwesome;display:inline-block;font-weight:normal;font-style:normal;line-height:1;-webkit-font-smoothing:antialiased;text-decoration:none;"><span style="font-family:FontAwesome;font-weight:normal;font-style:normal;line-height:1;"></span></i></a><span style="display:table;clear:both;"></span></div><hr style="box-sizing:content-box;height:0px;margin:15px 0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;border-right-color:initial;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);"/>

    <div style="position:relative;"><a name="comments" style="background:transparent;color:rgb(5, 147, 211);text-decoration:none;cursor:pointer;position:absolute;top:-65px;"></a></div>
							</div></div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 